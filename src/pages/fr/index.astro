---
// src/pages/fr/index.astro
import BaseLayout from "../../layouts/BaseLayout.astro";
import ServiceCard from "../../components/ServiceCard.astro";
import PortfolioCard from "../../components/PortfolioCard.astro";
---

<BaseLayout
  title="Technical Writer & Ghostwriter | Documentation API & IA"
  description="Technical Writer & Ghostwriter — API & documentation technique pour entreprises innovantes"
  lang="fr"
>
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">
          Technical Writer &<br />
          <span class="gradient-text">Ghostwriter</span>
        </h1>
        <p class="hero-subtitle">
          Documentation API et IA pour entreprises tech
        </p>
        <div class="hero-cta">
          <a href="/fr/portfolio" class="btn btn-primary">Voir le portfolio</a>
          <a href="/fr/contact" class="btn btn-secondary"
            >Discuter de votre projet</a
          >
        </div>
      </div>

      <div class="code-preview">
        <div class="code-header">
          <div class="dots"><span></span><span></span><span></span></div>
          <span class="filename">neolens-api.sh</span>
        </div>
        <pre
          class="code-block"><code class="language-bash">curl -X POST https://api.neolens.ai/analyze \
  -H "Authorization: Bearer &lt;token&gt;" \
  -H "Content-Type: application/json" \
  -d '&#123;
    "image_url": "https://demo.org/mri-sample.png",
    "task": "anomaly_detection",
    "report_format": "report_format"
  &#125;'</code></pre>
      </div>
    </div>
  </section>

  <!-- Services Preview -->
  <section class="services-preview">
    <div class="container">
      <h2 class="section-title">Expertises Clés</h2>
      <div class="services-grid">
        <ServiceCard
          icon="audit"
          title="Audit Documentation"
          description="Évaluation complète de votre documentation avec recommandations d'amélioration."
          link="/fr/services#audit"
          lang="fr"
        />
        <ServiceCard
          icon="api"
          title="Documentation technique"
          description="API, spécifications produit, guides utilisateurs et tutoriels — pour des contenus clairs et adaptés aux développeurs comme aux utilisateurs finaux."
          link="/fr/services#documentation"
          lang="fr"
        />
        <ServiceCard
          icon="ghostwriting"
          title="Ghostwriting Technique"
          description="Articles, tutoriels, livres blancs et études de cas techniques rédigés sous votre signature."
          link="/fr/services#ghostwriting"
          lang="fr"
        />
        <ServiceCard
          icon="maintenance"
          title="Documentation évolutive"
          description="Vos contenus restent toujours clairs, actuels et adaptés aux évolutions de votre produit."
          link="/fr/services#maintenance"
          lang="fr"
        />
      </div>
    </div>
  </section>

  <!-- Portfolio Highlights -->
  <section class="portfolio-highlights">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Projets Récents</h2>
        <a href="/fr/portfolio" class="section-link">Voir Tous les Projets →</a>
      </div>
      <div class="portfolio-grid">
        <PortfolioCard
          title="Neolens – Documentation API"
          client="IA fictive d'imagerie médicale"
          description="Documentation API complète pour l'analyse intelligente d'images médicales, avec guides interactifs et onboarding développeur."
          tags={["API Documentation", "Docusaurus", "Interactive Guides"]}
          image="/portfolio/neolens-api-docs.png"
          link="https://neolens-api-docs.netlify.app/"
          category={["api-docs"]}
        />
        <PortfolioCard
          title="Documentation API Cognitia sur GitBook"
          client="Plateforme IA Cognitia fictive"
          description="Plateforme de documentation API professionnelle construite sur GitBook avec recherche avancée, collaboration équipe et expérience développeur interactive"
          tags={["GitBook", "Team Collaboration", "Enterprise Docs"]}
          image="/portfolio/cognitia-api-docs.png"
          link="https://cognitia-api-documentation.gitbook.io/bgallais"
          category={["api-docs", "enterprise"]}
        />
        <PortfolioCard
          title="Documentation Plateforme Tech"
          client="Plateforme technique fictive"
          description="Documentation complète de plateforme technique avec guides développeur, références API et bonnes pratiques d'intégration"
          tags={[
            "Documentation Technique",
            "Developer Onboarding",
            "GitHub Pages",
          ]}
          image="/portfolio/visionary-ai-docs.png"
          link="https://berangeregallais.github.io/visionary-ai/introduction"
          category={["technical-docs"]}
        />
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Une documentation <br />qui fait la différence</h2>
        <p>
          Améliorez l’expérience de vos clients et équipes grâce à une
          information précise et accessible.<br />
          Parlons-en ensemble.
        </p>
        <a href="/fr/contact" class="btn btn-primary btn-large"
          >Discuter de votre projet</a
        >
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* ===============================
   HERO
   =============================== */
  .hero {
    padding: 8rem 0 6rem;
    background: linear-gradient(
      135deg,
      rgb(var(--color-background)) 0%,
      rgb(var(--color-primary) / 0.05) 100%
    );
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle at 20% 80%,
        rgb(var(--color-primary) / 0.08) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 20%,
        rgb(var(--color-accent) / 0.05) 0%,
        transparent 50%
      );
    pointer-events: none;
  }
  .hero .container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5rem;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    position: relative;
    z-index: 1;
  }
  .hero-title {
    font-family: var(--font-serif);
    font-size: clamp(3rem, 6vw, 5rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 2rem;
    color: rgb(var(--color-text));
  }
  .gradient-text {
    background: linear-gradient(
      135deg,
      rgb(var(--color-primary)),
      rgb(var(--color-secondary))
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline-block;
  }
  .hero-subtitle {
    font-size: 1.25rem;
    line-height: 1.6;
    color: rgb(var(--color-text-muted));
    margin-bottom: 2rem;
    max-width: 90%;
  }
  .hero-cta {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  /* ===============================
   CODE PREVIEW 
   =============================== */
  .code-preview {
    border-radius: 1rem;
    overflow: hidden;
  }

  :root[data-theme="light"] .code-preview {
    background: #0a0c12;
    border: 1px solid rgba(0, 0, 0, 0.35);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  :root[data-theme="light"] .code-header {
    display: flex;
    align-items: center;
    padding: 1.25rem 1.5rem;
    background: #0f1422;
    color: rgba(255, 255, 255, 0.95);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    font-family: var(--font-mono);
    font-size: 0.875rem;
  }
  :root[data-theme="light"] .code-header .filename {
    color: rgba(255, 255, 255, 0.95);
    font-weight: 600;
  }
  :root[data-theme="light"] .code-header .dots {
    display: flex;
    gap: 0.5rem;
    margin-right: 1rem;
  }
  :root[data-theme="light"] .code-header .dots span {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    opacity: 0.9;
    background: #e6b7d4;
  }

  :root[data-theme="dark"] .code-preview {
    background: rgb(var(--color-surface) / 0.9);
    border: 1px solid rgb(var(--color-border) / 0.5);
    box-shadow:
      0 25px 50px rgb(var(--color-shadow) / 0.2),
      0 0 0 1px rgb(var(--color-primary) / 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  :root[data-theme="dark"] .code-header {
    display: flex;
    align-items: center;
    padding: 1.25rem 1.5rem;
    background: rgb(var(--color-surface-variant) / 0.3);
    border-bottom: 1px solid rgb(var(--color-border) / 0.3);
    color: rgb(var(--color-text));
    font-family: var(--font-mono);
    font-size: 0.875rem;
  }
  .code-header .dots {
    display: flex;
    gap: 0.5rem;
    margin-right: 1rem;
  }
  .code-header .dots span {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: var(--color-text-muted);
    opacity: 0.3;
  }
  .code-header .dots span:nth-child(1) {
    background: rgb(var(--color-primary));
  }
  .code-header .dots span:nth-child(2) {
    background: rgb(var(--color-secondary));
  }
  .code-header .dots span:nth-child(3) {
    background: rgb(var(--color-accent));
  }
  .filename {
    font-family: var(--font-mono);
    font-size: 0.875rem;
    color: rgb(var(--color-text-muted));
  }

  :root[data-theme="light"] .code-block {
    background: #05060a;
    color: #f5f5f5;
    margin: 0;
    padding: 1.25rem 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    line-height: 1.6;
    white-space: pre-wrap;
    overflow-x: auto;
    border-radius: 0 0 1rem 1rem;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    contain: paint;
    transform: translateZ(0);
  }

  :root[data-theme="dark"] .code-block {
    background: rgb(var(--color-surface-variant));
    color: #e6b7d4;
    margin: 0;
    padding: 1.25rem 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    line-height: 1.6;
    white-space: pre-wrap;
    overflow-x: auto;
    border-radius: 0 0 1rem 1rem;
  }

  .code-block::-webkit-scrollbar {
    height: 10px;
  }
  .code-block::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 8px;
  }

  .code-block,
  .code-block code {
    text-shadow: none !important;
    font-variant-ligatures: none;
    font-feature-settings:
      "liga" 0,
      "calt" 0;
  }

  :root[data-theme="light"] .code-block code {
    background: transparent !important;
    color: #f5f5f5 !important;
    text-shadow: none !important;
  }

  .code-block code {
    color: #e6e6e6;
    tab-size: 2;
    font-family: var(--font-mono);
  }
  .code-block .token.comment,
  .code-block .token.prolog,
  .code-block .token.doctype,
  .code-block .token.cdata {
    color: #8b90a1;
    font-style: italic;
  }
  .code-block .token.keyword,
  .code-block .token.atrule {
    color: #82aaff;
    font-weight: 600;
  }
  .code-block .token.string,
  .code-block .token.char,
  .code-block .token.attr-value,
  .code-block .token.builtin {
    color: #c3e88d;
  }
  .code-block .token.number,
  .code-block .token.boolean,
  .code-block .token.constant,
  .code-block .token.symbol {
    color: #f78c6c;
  }
  .code-block .token.function,
  .code-block .token.method {
    color: #c792ea;
  }
  .code-block .token.property,
  .code-block .token.variable,
  .code-block .token.parameter,
  .code-block .token.regex {
    color: #f07178;
  }
  .code-block .token.operator,
  .code-block .token.punctuation {
    color: #e6e6e6;
  }
  .code-block .token.selector,
  .code-block .token.tag,
  .code-block .token.namespace,
  .code-block .token.deleted {
    color: #ffcb6b;
  }
  .code-block .token.attr-name,
  .code-block .token.inserted {
    color: #addb67;
  }
  .code-block .token.class-name {
    color: #ffcb6b;
  }
  .code-block ::selection {
    background: rgba(255, 255, 255, 0.18);
  }

  /* ===============================
   SERVICES 2x2 
   =============================== */
  .services-preview {
    padding: 8rem 0;
    background: rgb(var(--color-surface) / 0.3);
  }
  .section-title {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    font-weight: 600;
    text-align: center;
    margin-bottom: 3rem;
    color: rgb(var(--color-text));
  }

  /* Grille 2x2 pour 4 services */
  .services-grid {
    display: grid;
    gap: 2rem;
    margin-top: 3rem;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* Sur mobile : 1 colonne */
  @media (max-width: 768px) {
    .services-grid {
      grid-template-columns: 1fr;
    }
  }

  /* ===============================
   PORTFOLIO
   =============================== */
  .portfolio-highlights {
    padding: 8rem 0;
    background: rgb(var(--color-surface-variant) / 0.5);
  }
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4rem;
  }
  .section-header h2 {
    font-family: var(--font-serif);
    font-size: 2.5rem;
    font-weight: 600;
    color: rgb(var(--color-text));
    margin: 0;
  }
  .portfolio-highlights .section-header {
    display: flex;
    justify-content: center; /* centre tout par défaut */
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    text-align: center;
  }

  .portfolio-highlights .section-header h2 {
    flex: 0 0 100%; /* force le titre sur toute la largeur */
    text-align: center;
    margin-bottom: 1rem;
  }

  .portfolio-highlights .section-header .section-link {
    text-align: center;
  }
  .section-link {
    color: rgb(var(--color-primary));
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.2s ease;
  }
  .section-link:hover {
    opacity: 0.8;
  }
  .portfolio-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
  }

  /* ===============================
   CTA SECTION
   =============================== */
  .cta-section {
    padding: 8rem 0;
    background: linear-gradient(
      135deg,
      rgb(var(--color-primary) / 0.08) 0%,
      rgb(var(--color-accent) / 0.05) 100%
    );
    position: relative;
    overflow: hidden;
  }
  .cta-section::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 30% 70%,
      rgb(var(--color-primary) / 0.1) 0%,
      transparent 50%
    );
    pointer-events: none;
  }
  .cta-content {
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  .cta-content h2 {
    font-family: var(--font-serif);
    font-size: 3rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: rgb(var(--color-text));
  }
  .cta-content p {
    font-size: 1.125rem;
    color: rgb(var(--color-text-muted));
    margin-bottom: 2rem;
  }

  /* ===============================
   RESPONSIVE GLOBAL
   =============================== */
  @media (max-width: 768px) {
    .hero .container {
      grid-template-columns: 1fr;
      gap: 2rem;
      text-align: center;
    }
    .hero-cta {
      justify-content: center;
    }
    .cta-content h2 {
      font-size: 2rem;
    }
  }

  /* ===============================
   TABLET & TOUCH ENHANCEMENTS
   =============================== */

  /* Container responsive padding (utile pour les sections hors .hero) */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }
  @media (max-width: 1024px) {
    .container {
      padding: 0 1.5rem;
    }
  }
  @media (max-width: 600px) {
    .container {
      padding: 0 1rem;
    }
  }

  /* Hero – garder 2 colonnes sur tablette mais réduire les espacements/tailles */
  @media (max-width: 1200px) {
    .hero {
      padding: 6rem 0 5rem;
    }
  }
  @media (max-width: 1024px) {
    .hero .container {
      grid-template-columns: 1.1fr 0.9fr; /* conserve le visuel hero + code sur iPad */
      gap: 3rem;
    }
    .hero-title {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
    }
    .hero-subtitle {
      font-size: 1.1rem;
      max-width: 100%;
    }
    .code-header,
    .code-block {
      padding: 1rem 1.25rem;
    }
  }
  /* Passage à 1 colonne sous ~900 px (grandes tablettes en portrait) */
  @media (max-width: 900px) {
    .hero .container {
      grid-template-columns: 1fr;
      gap: 2rem;
      text-align: center;
    }
    .hero-cta {
      justify-content: center;
    }
    .code-preview {
      max-width: 720px;
      margin: 0 auto;
    }
  }

  /* Services – 2 colonnes sur tablette, 1 sur mobile (déjà géré), on optimise les espacements */
  @media (max-width: 1024px) {
    .services-preview {
      padding: 6rem 0;
    }
    .services-grid {
      gap: 1.5rem;
    }
  }
  @media (max-width: 768px) {
    .services-preview {
      padding: 5rem 0;
    }
  }

  /* Section header – éviter la collision du lien sur petits écrans/tablettes étroites */
  @media (max-width: 820px) {
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.75rem;
    }
  }

  /* Portfolio – assouplir le min des cartes pour tenir en 2 colonnes sur tablette */
  @media (max-width: 1024px) {
    .portfolio-grid {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
  }
  @media (max-width: 640px) {
    .portfolio-grid {
      grid-template-columns: 1fr; /* mobile pur */
    }
  }

  /* CTA – réduire la hauteur sur tablette et lisser la typo */
  @media (max-width: 1024px) {
    .cta-section {
      padding: 6rem 0;
    }
    .cta-content h2 {
      font-size: 2.4rem;
    }
    .cta-content p {
      font-size: 1.05rem;
    }
  }
  @media (max-width: 768px) {
    .cta-section {
      padding: 4.5rem 0;
    }
    .cta-content h2 {
      font-size: 2rem;
    }
  }

  /* Touch targets & petits ajustements pour écrans tactiles */
  @media (hover: none) and (pointer: coarse) {
    .btn {
      min-height: 44px;
      padding: 0.9rem 1.1rem;
    }
    .hero-cta {
      gap: 0.75rem;
    }
    .code-block::-webkit-scrollbar {
      height: 12px;
    }
  }

  /* Bonus : limiter les très grands paddings des sections sur tablettes */
  @media (max-width: 1024px) {
    .portfolio-highlights {
      padding: 6rem 0;
    }
  }

  /* ======== Code block à gauche en mobile ======== */
  @media (max-width: 900px) {
    /* On annule le centrage global du container du hero */
    .hero .container {
      text-align: initial;
    }
    /* On ne recentre que le texte du bloc titre/sous-titre/CTA */
    .hero-content {
      text-align: center;
    }

    /* Le bloc code ne doit pas se centrer dans la grille 1 colonne */
    .code-preview {
      justify-self: start; /* ancre à gauche dans la grid */
      margin: 0; /* annule margin: 0 auto; */
    }
  }

  @media (max-width: 768px) {
    /* Le code prend toute la largeur utile à gauche */
    .code-preview {
      width: 100%;
      max-width: none; /* annule le max-width: 720px */
      text-align: left;
    }
    .code-header,
    .code-block {
      text-align: left; /* le contenu du <pre><code> reste à gauche */
    }
  }

  /* Empêche les CTA de s'étirer en pleine largeur sur mobile */
@media (max-width: 768px) {
  .hero-cta .btn,
  .cta-section .btn {
    display: inline-flex !important;
    width: auto !important;
    max-width: 100%;
    flex: 0 0 auto;        /* ne pas s'étirer dans le flex */
    align-self: center;    /* bien centré dans le conteneur */
  }

  /* Optionnel : si tu veux que deux boutons passent l’un sous l’autre
     sans prendre toute la largeur, garde le gap agréable */
  .hero-cta {
    justify-content: center;
    gap: 0.75rem;
  }
}

</style>
